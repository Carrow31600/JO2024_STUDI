







<div class="container">

<!-- FORMULAIRE DE FILTRES -->
  <form [formGroup]="filterForm" class="row g-2 mb-3 mt-5 bg-filters justify-content-center align-items-center">
    <div class="col-md-3 m-3">
      <input type="text" formControlName="sport" class="form-control" placeholder="Filtrer par sport">
    </div>
    <div class="col-md-3 m-3">
      <input type="text" formControlName="site" class="form-control" placeholder="Filtrer par site">
    </div>
    <div class="col-md-3 m-3">
      <input type="date" formControlName="date" class="form-control">
    </div>
    <div class="col-md-3 m-3  text-center">
      <button type="button" class="btn btn-dark" (click)="resetFilters()">Réinitialiser</button>
    </div>
  </form>



  <form [formGroup]="competitionForm">
    <div formArrayName="competitions" class="mt-3">
  
      <!-- Format tableau sur pc et tablettes -->
      <div class="d-none d-sm-block table-responsive">

        <table class="table table-hover">
          <thead class="table-warning">
            <tr>
              <th>Date</th>
              <th>Site</th>
              <th>Sport</th>
              <th>Offre</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let control of competitionsFormArray.controls; let i = index" [formGroupName]="i">
              <ng-container *ngIf="competitions()?.length > i">
                <td>{{ competitions()[i].date }}</td>
                <td>{{ competitions()[i].site_name }}</td>
                <td>{{ competitions()[i].sport_name }}</td>
                <td>
                  <select formControlName="selectedOffer" class="form-select">
                    <option value="">Sélectionner une offre</option>
                    <option *ngFor="let offer of offers" [value]="offer.id">{{ offer.name }}</option>
                  </select>
                </td>
                <td class="d-flex justify-content-center align-items-center">
                  <button type="button" class="btn btn-dark btn-sm " (click)="addToCart(i)">
                    Ajouter au panier
                  </button>
                </td>
              </ng-container>
            </tr>
          </tbody>
        </table>
      </div>
  
      <!-- format cartes sur telephone portable -->
      <div class="d-block d-sm-none">
        <div *ngFor="let control of competitionsFormArray.controls; let i = index" [formGroupName]="i" class="mb-4">
          <div class="card shadow-sm">
            <div class="card-body">
              <div class="d-flex flex-column">
                <div class="mb-2">
                  <strong>Date :</strong> {{ competitions()[i].date }}
                </div>
                <div class="mb-2">
                  <strong>Site :</strong> {{ competitions()[i].site_name }}
                </div>
                <div class="mb-2">
                  <strong>Sport :</strong> {{ competitions()[i].sport_name }}
                </div>
  
                <div class="mb-2">
                  <select formControlName="selectedOffer" class="form-select">
                    <option value="">Sélectionner une offre</option>
                    <option *ngFor="let offer of offers" [value]="offer.id">{{ offer.name }}</option>
                  </select>
                </div>
  
                <button type="button" class="btn btn-dark w-100" (click)="addToCart(i)">
                  Ajouter au panier
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
  
    </div>
  </form>
    
</div>



  